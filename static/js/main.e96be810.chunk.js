(this["webpackJsonpreact-forum"]=this["webpackJsonpreact-forum"]||[]).push([[0],{155:function(e,t,a){},250:function(e,t,a){e.exports=a(435)},255:function(e,t,a){},256:function(e,t,a){},435:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),l=a.n(o),s=(a(255),a(256),a(103)),c=a(18),i=(a(155),a(443)),u=a(450),m=a(106),d=a(8),p=a(17),b=a(449),g=a(68),h=a(447),f=a(448),O=a(444),E=a(65),w=a.n(E),j=function(e,t,a){for(var n=t||Math.random().toString(36).substr(2,20),r=e,o=0;o<a;o++)r=btoa(e+n);return"$".concat(btoa(n),"$").concat(a,"$").concat(r)};function v(e,t){return new Promise((function(a,n){var r=(JSON.parse(localStorage.getItem("users"))||[]).find((function(t){return t.username===e}));r&&function(e,t){var a=t.split("$"),n=Object(p.a)(a,4),r=(n[0],n[1]),o=n[2];n[3];return j(e,atob(r),o)===t}(t,r.password)?(localStorage.setItem("access_token",e),a({status:200})):(localStorage.removeItem("access_token",e),a({status:401}))}))}function y(){return!!localStorage.getItem("access_token")}function x(){return localStorage.getItem("access_token")}var S=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)({id:"",title:""}),c=Object(p.a)(l,2),i=c[0],w=c[1],j=Object(n.useState)(!1),v=Object(p.a)(j,2),x=v[0],S=v[1],k=Object(n.useState)({}),A=Object(p.a)(k,2),P=A[0],N=A[1],I=Object(n.useState)({}),C=Object(p.a)(I,2),L=C[0],B=C[1];Object(n.useEffect)((function(){E.getTopics().then((function(e){o(e.data)}))}),[]);return r.a.createElement("div",{className:"topics"},r.a.createElement("div",{className:"topics__button"},r.a.createElement(b.a,{positive:!0,size:"medium",onClick:function(){y()?S(!0):document.getElementById("loginButton").click()}},"Add new topic ",r.a.createElement(g.a,{name:"right arrow"}))),a.map((function(e){return r.a.createElement(s.b,{key:e.id,to:"/question/"+e.id},r.a.createElement("div",{className:"topics__title"},r.a.createElement(u.a,{as:"h3",content:e.title}),r.a.createElement(g.a,{name:"reply"}),void 0===e.numberOfAnswers?"0 replies ":e.numberOfAnswers,1==e.numberOfAnswers&&r.a.createElement("span",null," reply"),e.numberOfAnswers>1&&r.a.createElement("span",null," replies"),0==e.numberOfAnswers&&r.a.createElement("span",null," replies"),e.numberOfAnswers>0&&r.a.createElement(h.a.Metadata,null,r.a.createElement("span",null,"Latest: "),new Date(e.lastAnswerPublishedAt).toLocaleString(navigator.language,{dateStyle:"long",timeStyle:"short",hour12:!0}))))})),P.topic&&r.a.createElement(f.a,P.topic),x&&r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Field,{className:"topics__form-input"},r.a.createElement(O.a.Input,{autoFocus:!0,error:L.textLength?{content:L.textLength.message,pointing:"below"}:null,focus:!0,fluid:!0,onChange:function(e){var t=e.target.value;w({id:String(Math.floor(100*Math.random())),title:t,answers:[]})},value:i.title,placeholder:"Enter topic name",type:"text"})),r.a.createElement(O.a.Field,{className:"topics__button-container"},r.a.createElement(b.a.Group,null,r.a.createElement(b.a,{onClick:function(){w({title:"",id:""}),S(!1)}},"Cancel"),r.a.createElement(b.a.Or,null),r.a.createElement(b.a,{primary:!0,animated:!0,onClick:function(){i.title.length<5?B(Object(d.a)(Object(d.a)({},L),{},{textLength:{message:"Minimum is 5 letters"}})):(i.title.length>200?B(Object(d.a)(Object(d.a)({},L),{},{textLength:{message:"Maximum is 200 letters"}})):B(Object(d.a)(Object(d.a)({},L),{},{textLength:!1})),E.addTopic(i).then((function(e){201===e.status?(o([].concat(Object(m.a)(a),[i])),w({title:"",id:""}),S(!1),N(Object(d.a)(Object(d.a)({},P),{},{topic:{success:!0,content:"Topic is sucessfully submited.",header:"Congratulations!"}}))):N(Object(d.a)(Object(d.a)({},P),{},{topic:{negative:!0,content:"Unexpected error occured on the server side. Please try later.",header:"Topic cannot be submited"}}))})))}},r.a.createElement(b.a.Content,{visible:!0},"Confirm"),r.a.createElement(b.a.Content,{hidden:!0},r.a.createElement(g.a,{name:"arrow right"}))))))))},k=a(445),A=a(360),P=function(e){var t=Object(n.useState)({username:"",password:"",confirmPassword:"",checked:!1}),a=Object(p.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(),c=Object(p.a)(s,2),i=c[0],u=c[1],m=Object(n.useState)({modalOpen:!1}),g=Object(p.a)(m,2),h=g[0],f=g[1],E=function(){l(Object(d.a)(Object(d.a)({},o),{},{username:"",password:"",confirmPassword:"",checked:!1}))},w=function(e,t){return e&&e.details.find((function(e){return e.path.includes(t)}))};return r.a.createElement(r.a.Fragment,null,!e.isLogged&&r.a.createElement(b.a,{onClick:function(){f(Object(d.a)(Object(d.a)({},h),{},{modalOpen:!0}))}},"Sign Up"),r.a.createElement(k.a,{size:"tiny",onClose:function(){f(Object(d.a)(Object(d.a)({},h),{},{modalOpen:!1})),E()},open:h.modalOpen,closeIcon:!0},r.a.createElement(k.a.Header,null,"Sign Up"),r.a.createElement(k.a.Content,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement(O.a.Input,{error:w(i,"username")?{content:w(i,"username").message,pointing:"above"}:null,value:o.username,onChange:function(e){var t=e.target.value;l(Object(d.a)(Object(d.a)({},o),{},{username:t}))}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement(O.a.Input,{error:w(i,"password")?{content:w(i,"password").message,pointing:"above"}:null,value:o.password,type:"password",onChange:function(e){var t=e.target.value;l(Object(d.a)(Object(d.a)({},o),{},{password:t}))}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Confirm Password"),r.a.createElement(O.a.Input,{value:o.confirmPassword,error:w(i,"confirmPassword")?{content:w(i,"confirmPassword").message,pointing:"above"}:null,type:"password",onChange:function(e){var t=e.target.value;l(Object(d.a)(Object(d.a)({},o),{},{confirmPassword:t}))}})),r.a.createElement(O.a.Field,null,r.a.createElement(O.a.Checkbox,{checked:o.checked,error:!!w(i,"checked")||null,onChange:function(){l(Object(d.a)(Object(d.a)({},o),{},{checked:!o.checked}))},label:"I agree to the Terms and Conditions"})),r.a.createElement(b.a,{onClick:function(){var e,t,a=A.object({username:A.string().alphanum().min(3).max(30).required().messages({"string.base":"Username should be a type of 'text'","string.empty":"Username cannot be an empty field","string.min":"Username should have a minimum length of {#limit}","string.max":"Password should have a maximum length of {#limit}","any.required":"Username is a required field"}),password:A.string().pattern(/^[a-zA-Z0-9]*$/).min(8).max(30).required().messages({"string.pattern.base":"Password should contain numbers and letters only","string.empty":"Password cannot be an empty field","string.min":"Password should have a minimum length of {#limit}","string.max":"Password should have a maximum length of {#limit}","any.required":"Password is a required field"}),confirmPassword:A.string().valid(A.ref("password")).required().messages({"string.pattern.base":"Confirm password should contain numbers and letters only","string.empty":"Confirm password cannot be an empty field","any.required":"Confirm password is a required field","any.only":"Passwords are not matching"}),checked:A.boolean().valid(!0)}).options({abortEarly:!1}).validate(o).error;(u(a),a)||(e=o.username,t=o.password,new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("users"))||[],o={username:e,password:j(t,null,10)};r.push(o),localStorage.setItem("users",JSON.stringify(r)),a({status:201})}))).then((function(e){f(Object(d.a)(Object(d.a)({},h),{},{modalOpen:!1})),E()}))},type:"submit"},"Submit")))))},N=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(p.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)({modalOpen:!1}),c=Object(p.a)(s,2),i=c[0],u=c[1],m=Object(n.useState)({}),g=Object(p.a)(m,2),h=g[0],E=g[1],w=function(){l(Object(d.a)(Object(d.a)({},o),{},{username:"",password:""}))};return r.a.createElement(r.a.Fragment,null,!e.isLogged&&r.a.createElement(b.a,{id:"loginButton",onClick:function(){u(Object(d.a)(Object(d.a)({},i),{},{modalOpen:!0}))}},"Log In"),e.isLogged&&r.a.createElement(b.a,{compact:!0,onClick:e.isLoggedOut},"Log out"),r.a.createElement(k.a,{size:"tiny",onClose:function(){u(Object(d.a)(Object(d.a)({},i),{},{modalOpen:!1})),w()},open:i.modalOpen,closeIcon:!0},r.a.createElement(k.a.Header,null,"Log in"),r.a.createElement(k.a.Content,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement(O.a.Input,{fluid:!0,icon:"user",iconPosition:"left",value:o.username,onChange:function(e){var t=e.target.value;l(Object(d.a)(Object(d.a)({},o),{},{username:t}))}})),r.a.createElement(O.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement(O.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",type:"password",value:o.password,onChange:function(e){var t=e.target.value;l(Object(d.a)(Object(d.a)({},o),{},{password:t}))}})),h.login&&r.a.createElement(f.a,h.login),r.a.createElement(b.a,{onClick:function(){v(o.username,o.password).then((function(t){200===t.status?(u(Object(d.a)(Object(d.a)({},i),{},{modalOpen:!1})),w(),e.onLogin()):401===t.status?E(Object(d.a)(Object(d.a)({},h),{},{login:{negative:!0,content:"Username or password are not correct"}})):404===t.status&&E(Object(d.a)(Object(d.a)({},h),{},{login:{negative:!0,content:"User does not exist"}})),console.log(o)}))},type:"submit"},"Log in")))))},I=function(){var e=Object(n.useState)(y()),t=Object(p.a)(e,2),a=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("h5",{className:"ui header avatar-header"},r.a.createElement("img",{src:"/reactjs-forum/unknown.png",className:"ui circular image"}),x()),r.a.createElement(N,{isLoggedOut:function(){localStorage.removeItem("access_token"),window.location.href="/reactjs-forum",o(y())},isLogged:a,onLogin:function(){o(y())}}),r.a.createElement(P,{isLogged:a}))},C=function(e){var t=e.mobile;return r.a.createElement(i.a,{fluid:!0,className:"main-container"},r.a.createElement("div",{className:"homepage__block"},r.a.createElement("div",{className:"homepage__block--button"},r.a.createElement(I,null)),r.a.createElement("div",{className:"homepage__title"},r.a.createElement(u.a,{as:"h1",inverted:!0,content:"Welcome to Forum"}),r.a.createElement(u.a,{as:"h2",content:"Do whatever you want when you want to.",inverted:!0,style:{fontSize:t?"1.5em":"1.7em",fontWeight:"normal",marginTop:t?"0.5em":"1.5em"}}))),r.a.createElement(i.a,{className:"grid-container"},r.a.createElement("div",{className:"homepage"},r.a.createElement("div",{className:"homepage__content"},r.a.createElement(S,null)))))},L=function(e){var t=Object(n.useState)({}),a=Object(p.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)({text:"",textLength:200}),c=Object(p.a)(s,2),i=c[0],u=c[1];return r.a.createElement(O.a,{reply:!0},r.a.createElement(O.a.TextArea,{onChange:function(e){var t=e.target.value,a=t.length,n=200-a;a>200?l(Object(d.a)(Object(d.a)({},o),{},{textLength:{message:"You have reached the limit"}})):(l(Object(d.a)(Object(d.a)({},o),{},{textLength:null})),u(Object(d.a)(Object(d.a)({},i),{},{text:t,textLength:n})))},value:i.text,error:o.text?{content:o.text.message,pointing:"below"}:null,placeholder:"Answer"}),r.a.createElement("p",null,i.textLength),o.textLength&&r.a.createElement("p",null,o.textLength.message),r.a.createElement(b.a,{onClick:function(t){y()?i.text?i.text.length<=1?l(Object(d.a)(Object(d.a)({},o),{},{text:{message:"This field has to have more than 1 letter"}})):(l(Object(d.a)(Object(d.a)({},o),{},{text:!1})),e.onAddAnswer({id:Math.floor(100*Math.random()),publishedAt:new Date,publishedBy:x(),text:i.text}),u(Object(d.a)(Object(d.a)({},i),{},{text:"",textLength:"200"}))):l(Object(d.a)(Object(d.a)({},o),{},{text:{message:"This field cannot be empty"}})):document.getElementById("loginButton").click()},content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0}))},B=function(e){return r.a.createElement(h.a.Group,null,r.a.createElement(h.a,null,r.a.createElement(h.a.Avatar,{as:"a",src:"/reactjs-forum/unknown.png"}),r.a.createElement(h.a.Content,null,r.a.createElement(h.a.Author,null,e.publishedBy),r.a.createElement(h.a.Metadata,null,new Date(e.publishedAt).toLocaleString(navigator.language,{dateStyle:"long",timeStyle:"short",hour12:!0})),r.a.createElement(h.a.Text,null,e.text))))},_=function(e){return r.a.createElement(r.a.Fragment,null,e.answers&&e.answers.map((function(e){return r.a.createElement(B,{key:e.id,publishedBy:e.publishedBy,publishedAt:e.publishedAt,text:e.text})})))},J=function(e){var t=Object(n.useState)({}),a=Object(p.a)(t,2),o=a[0],l=a[1];Object(n.useEffect)((function(){w.a.getTopic(e.match.params.topicId).then((function(e){l(e)}))}),[]);return r.a.createElement(i.a,{fluid:!0,className:"main-container"},r.a.createElement("div",{className:"homepage__block"},r.a.createElement("div",{className:"homepage__block--button"},r.a.createElement(I,null)),r.a.createElement("div",{style:{backgroundColor:["red","blue","green","orange","purple","pink","yellow","lavander","lightblue","brown"][o.id%10]},className:"homepage__title"},r.a.createElement(u.a,{as:"h2",inverted:!0,content:o.title}))),r.a.createElement(i.a,{className:"grid-container"},r.a.createElement("div",{className:"topic-page"},r.a.createElement(_,{answers:o.answers}),r.a.createElement(L,{onAddAnswer:function(e){w.a.addAnswer(o.id,e).then((function(t){l(Object(d.a)(Object(d.a)({},o),{},{answers:[].concat(Object(m.a)(o.answers),[e])}))}))}}))))};var T=function(){return r.a.createElement("div",null,r.a.createElement(s.a,{basename:"/reactjs-forum"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/",exact:!0,component:C}),r.a.createElement(c.a,{path:"/question/:topicId",component:J}))))};a(434),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t){var a=[{id:"1",title:"Where to find a nice dress",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"You can find dress in street Kralja Petra"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"John Doe",text:"I have found mine there"},{id:"3",publishedAt:"2020-05-06 19:43:15",publishedBy:"John Doe",text:"There are also nice stores in street Strahinjica Bana"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"I am interested about dresses in Panchevo"}]},{id:"2",title:"Interesting games to play",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"quroidor"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"Vedrana Bradasevic",text:"Monopol"},{id:"12",publishedAt:"2020-05-06 19:43:15",publishedBy:"Nikolija Nikolic",text:"Jamb"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"Lora"}]},{id:"3",title:"Songs for weddings",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"Dance with somebody"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"Vedrana Bradasevic",text:"I have found mine there"},{id:"3",publishedAt:"2020-05-06 19:43:15",publishedBy:"Nikolija Nikolic",text:"There are also nice stores in street Strahinjica Bana"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"I am interested about dresses in Panchevo"}]}],n=function(){return localStorage.setItem("topics",JSON.stringify(a)),JSON.parse(JSON.stringify(a))};e.exports.getTopics=function(){return new Promise((function(e,t){var a=JSON.parse(localStorage.getItem("topics"))||n();e({status:200,data:a=a.map((function(e){return{id:e.id,title:e.title,lastAnswerPublishedAt:e.answers.length>0?e.answers.sort((function(e,t){return new Date(t.publishedAt).getTime()-new Date(e.publishedAt).getTime()}))[0].publishedAt:null,numberOfAnswers:e.answers.length}}))})}))},e.exports.getTopic=function(e){return new Promise((function(t,a){t((JSON.parse(localStorage.getItem("topics"))||n()).find((function(t){return t.id===e})))}))},e.exports.addTopic=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("topics"))||[];e.title.length<5||e.title.length>200||(n.push(e),localStorage.setItem("topics",JSON.stringify(n)),t({status:201}))}))},e.exports.addAnswer=function(e,t){return new Promise((function(a,r){var o=JSON.parse(localStorage.getItem("topics"))||n();o.find((function(t){return t.id==e})).answers.push(t),localStorage.setItem("topics",JSON.stringify(o)),a({status:201})}))}}},[[250,1,2]]]);
//# sourceMappingURL=main.e96be810.chunk.js.map