(this["webpackJsonpr-forum"]=this["webpackJsonpr-forum"]||[]).push([[0],{107:function(e,t,a){},145:function(e,t){var a=[{id:"1",title:"Where to find a nice dress",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"You can find dress in street Kralja Petra"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"John Doe",text:"I have found mine there"},{id:"3",publishedAt:"2020-05-06 19:43:15",publishedBy:"John Doe",text:"There are also nice stores in street Strahinjica Bana"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"I am interested about dresses in Panchevo"}]},{id:"2",title:"Interesting games to play",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"quroidor"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"Vedrana Bradasevic",text:"Monopol"},{id:"12",publishedAt:"2020-05-06 19:43:15",publishedBy:"Nikolija Nikolic",text:"Jamb"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"Lora"}]},{id:"3",title:"Songs for weddings",answers:[{id:"1",publishedAt:"2020-05-06 12:23:45",publishedBy:"John Doe",text:"Dance with somebody"},{id:"2",publishedAt:"2020-05-06 15:00:01",publishedBy:"Vedrana Bradasevic",text:"I have found mine there"},{id:"3",publishedAt:"2020-05-06 19:43:15",publishedBy:"Nikolija Nikolic",text:"There are also nice stores in street Strahinjica Bana"},{id:"4",publishedAt:"2020-05-06 20:23:55",publishedBy:"Petar Petrovic",text:"I am interested about dresses in Panchevo"}]}],n=function(){return localStorage.setItem("topics",JSON.stringify(a)),JSON.parse(JSON.stringify(a))};e.exports.getTopics=function(){return new Promise((function(e,t){var a=JSON.parse(localStorage.getItem("topics"))||n();e({status:200,data:a=a.map((function(e){return{id:e.id,title:e.title,lastAnswerPublishedAt:e.answers.length>0?e.answers.sort((function(e,t){return new Date(t.publishedAt).getTime()-new Date(e.publishedAt).getTime()}))[0].publishedAt:null,numberOfAnswers:e.answers.length}}))})}))},e.exports.getTopic=function(e){return new Promise((function(t,a){t((JSON.parse(localStorage.getItem("topics"))||n()).find((function(t){return t.id===e})))}))},e.exports.addTopic=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("topics"))||[];e.title.length<5||(n.push(e),localStorage.setItem("topics",JSON.stringify(n)),t({status:201}))}))},e.exports.addAnswer=function(e,t){return new Promise((function(a,r){var o=JSON.parse(localStorage.getItem("topics"))||n();o.find((function(t){return t.id==e})).answers.push(t),localStorage.setItem("topics",JSON.stringify(o)),a({status:201})}))}},154:function(e,t,a){},251:function(e,t,a){e.exports=a(436)},256:function(e,t,a){},257:function(e,t,a){},436:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),s=a.n(o),l=(a(256),a(257),a(237)),i=a(17),c=(a(154),a(107),a(444)),u=a(451),m=function(e){var t=e.mobile;return r.a.createElement(c.a,{fluid:!0,className:"main-container"},r.a.createElement("div",{className:"homepage__block"},r.a.createElement("div",{className:"homepage__block--button"}),r.a.createElement("div",{className:"homepage__title"},r.a.createElement(u.a,{as:"h1",inverted:!0,content:"Welcome to Forum"}),r.a.createElement(u.a,{as:"h2",content:"Do whatever you want when you want to.",inverted:!0,style:{fontSize:t?"1.5em":"1.7em",fontWeight:"normal",marginTop:t?"0.5em":"1.5em"}}))),r.a.createElement(c.a,{className:"grid-container"},r.a.createElement("div",{className:"homepage"},r.a.createElement("div",{className:"homepage__content"}))))},d=a(240),p=a(9),g=a(21),b=a(445),h=a(450),f=function(e,t,a){for(var n=t||Math.random().toString(36).substr(2,20),r=e,o=0;o<a;o++)r=btoa(e+n);return"$".concat(btoa(n),"$").concat(a,"$").concat(r)};function O(e,t){return new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("users")||[]).find((function(t){return t.username===e})),o=r.password;r&&function(e,t){var a=t.split("$"),n=Object(g.a)(a,4),r=(n[0],n[1]),o=n[2];n[3];return f(e,atob(r),o)===t}(t,o)?(localStorage.setItem("access_token",e),a({status:200})):(localStorage.removeItem("access_token",e),a({status:401}))}))}function w(){return!!localStorage.getItem("access_token")}function v(){return localStorage.getItem("access_token")}var E=function(e){var t=Object(n.useState)({}),a=Object(g.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)({text:"",textLength:200}),i=Object(g.a)(l,2),c=i[0],u=i[1];return r.a.createElement(b.a,{reply:!0},r.a.createElement(b.a.TextArea,{onChange:function(e){var t=e.target.value,a=t.length,n=200-a;a>200?s(Object(p.a)(Object(p.a)({},o),{},{textLength:{message:"You have reached the limit"}})):(s(Object(p.a)(Object(p.a)({},o),{},{textLength:null})),u(Object(p.a)(Object(p.a)({},c),{},{text:t,textLength:n})))},value:c.text,error:o.text?{content:o.text.message,pointing:"below"}:null,placeholder:"Answer"}),r.a.createElement("p",null,c.textLength),o.textLength&&r.a.createElement("p",null,o.textLength.message),r.a.createElement(h.a,{onClick:function(t){w()?c.text?c.text.length<=1?s(Object(p.a)(Object(p.a)({},o),{},{text:{message:"This field has to have more than 1 letter"}})):(s(Object(p.a)(Object(p.a)({},o),{},{text:!1})),e.onAddAnswer({id:Math.floor(100*Math.random()),publishedAt:new Date,publishedBy:v(),text:c.text}),u(Object(p.a)(Object(p.a)({},c),{},{text:"",textLength:"200"}))):s(Object(p.a)(Object(p.a)({},o),{},{text:{message:"This field cannot be empty"}})):document.getElementById("loginButton").click()},content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0}))},j=a(145),y=a.n(j),x=a(448),S=function(e){return r.a.createElement(x.a.Group,null,r.a.createElement(x.a,null,r.a.createElement(x.a.Avatar,{as:"a",src:"/r-forum/unknown.png"}),r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Author,null,e.publishedBy),r.a.createElement(x.a.Metadata,null,new Date(e.publishedAt).toLocaleString(navigator.language,{dateStyle:"long",timeStyle:"short",hour12:!0})),r.a.createElement(x.a.Text,null,e.text))))},k=function(e){return r.a.createElement(r.a.Fragment,null,e.answers&&e.answers.map((function(e){return r.a.createElement(S,{key:e.id,publishedBy:e.publishedBy,publishedAt:e.publishedAt,text:e.text})})))},P=a(446),A=a(360),I=function(e){var t=Object(n.useState)({username:"",password:"",confirmPassword:"",checked:!1}),a=Object(g.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)(),i=Object(g.a)(l,2),c=i[0],u=i[1],m=Object(n.useState)({modalOpen:!1}),d=Object(g.a)(m,2),O=d[0],w=d[1],v=function(){s(Object(p.a)(Object(p.a)({},o),{},{username:"",password:"",confirmPassword:"",checked:!1}))},E=function(e,t){return e&&e.details.find((function(e){return e.path.includes(t)}))};return r.a.createElement(r.a.Fragment,null,!e.isLogged&&r.a.createElement(h.a,{onClick:function(){w(Object(p.a)(Object(p.a)({},O),{},{modalOpen:!0}))}},"Sign Up"),r.a.createElement(P.a,{size:"tiny",onClose:function(){w(Object(p.a)(Object(p.a)({},O),{},{modalOpen:!1})),v()},open:O.modalOpen,closeIcon:!0},r.a.createElement(P.a.Header,null,"Sign Up"),r.a.createElement(P.a.Content,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement(b.a.Input,{error:E(c,"username")?{content:E(c,"username").message,pointing:"above"}:null,value:o.username,onChange:function(e){var t=e.target.value;s(Object(p.a)(Object(p.a)({},o),{},{username:t}))}})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement(b.a.Input,{error:E(c,"password")?{content:E(c,"password").message,pointing:"above"}:null,value:o.password,type:"password",onChange:function(e){var t=e.target.value;s(Object(p.a)(Object(p.a)({},o),{},{password:t}))}})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Confirm Password"),r.a.createElement(b.a.Input,{value:o.confirmPassword,error:E(c,"confirmPassword")?{content:E(c,"confirmPassword").message,pointing:"above"}:null,type:"password",onChange:function(e){var t=e.target.value;s(Object(p.a)(Object(p.a)({},o),{},{confirmPassword:t}))}})),r.a.createElement(b.a.Field,null,r.a.createElement(b.a.Checkbox,{checked:o.checked,error:!!E(c,"checked")||null,onChange:function(){s(Object(p.a)(Object(p.a)({},o),{},{checked:!o.checked}))},label:"I agree to the Terms and Conditions"})),r.a.createElement(h.a,{onClick:function(){var e,t,a=A.object({username:A.string().alphanum().min(3).max(30).required().messages({"string.base":"Username should be a type of 'text'","string.empty":"Username cannot be an empty field","string.min":"Username should have a minimum length of {#limit}","string.max":"Password should have a maximum length of {#limit}","any.required":"Username is a required field"}),password:A.string().pattern(/^[a-zA-Z0-9]*$/).min(8).max(30).required().messages({"string.pattern.base":"Password should contain numbers and letters only","string.empty":"Password cannot be an empty field","string.min":"Password should have a minimum length of {#limit}","string.max":"Password should have a maximum length of {#limit}","any.required":"Password is a required field"}),confirmPassword:A.string().valid(A.ref("password")).required().messages({"string.pattern.base":"Confirm password should contain numbers and letters only","string.empty":"Confirm password cannot be an empty field","any.required":"Confirm password is a required field","any.only":"Passwords are not matching"}),checked:A.boolean().valid(!0)}).options({abortEarly:!1}).validate(o).error;(u(a),a)||(e=o.username,t=o.password,new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("users"))||[],o={username:e,password:f(t,null,10)};r.push(o),localStorage.setItem("users",JSON.stringify(r)),a({status:201})}))).then((function(e){w(Object(p.a)(Object(p.a)({},O),{},{modalOpen:!1})),v()}))},type:"submit"},"Submit")))))},N=a(449),B=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(g.a)(t,2),o=a[0],s=a[1],l=Object(n.useState)({modalOpen:!1}),i=Object(g.a)(l,2),c=i[0],u=i[1],m=Object(n.useState)({}),d=Object(g.a)(m,2),f=d[0],w=d[1],v=function(){s(Object(p.a)(Object(p.a)({},o),{},{username:"",password:""}))};return r.a.createElement(r.a.Fragment,null,!e.isLogged&&r.a.createElement(h.a,{id:"loginButton",onClick:function(){u(Object(p.a)(Object(p.a)({},c),{},{modalOpen:!0}))}},"Log In"),e.isLogged&&r.a.createElement(h.a,{compact:!0,onClick:e.isLoggedOut},"Log out"),r.a.createElement(P.a,{size:"tiny",onClose:function(){u(Object(p.a)(Object(p.a)({},c),{},{modalOpen:!1})),v()},open:c.modalOpen,closeIcon:!0},r.a.createElement(P.a.Header,null,"Log in"),r.a.createElement(P.a.Content,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement(b.a.Input,{fluid:!0,icon:"user",iconPosition:"left",value:o.username,onChange:function(e){var t=e.target.value;s(Object(p.a)(Object(p.a)({},o),{},{username:t}))}})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement(b.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",type:"password",value:o.password,onChange:function(e){var t=e.target.value;s(Object(p.a)(Object(p.a)({},o),{},{password:t}))}})),f.login&&r.a.createElement(N.a,f.login),r.a.createElement(h.a,{onClick:function(){O(o.username,o.password).then((function(t){200===t.status?(u(Object(p.a)(Object(p.a)({},c),{},{modalOpen:!1})),v(),e.onLogin()):401===t.status&&w(Object(p.a)(Object(p.a)({},f),{},{login:{negative:!0,content:"Username or password are not correct"}})),console.log(o)}))},type:"submit"},"Log in")))))},C=function(){var e=Object(n.useState)(w()),t=Object(g.a)(e,2),a=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("h5",{className:"ui header avatar-header"},r.a.createElement("img",{src:"/r-forum/unknown.png",className:"ui circular image"}),v()),r.a.createElement(B,{isLoggedOut:function(){localStorage.removeItem("access_token"),window.location.href="/",o(w())},isLogged:a,onLogin:function(){o(w())}}),r.a.createElement(I,{isLogged:a}))},L=function(e){var t=Object(n.useState)({}),a=Object(g.a)(t,2),o=a[0],s=a[1];Object(n.useEffect)((function(){y.a.getTopic(e.match.params.topicId).then((function(e){s(e)}))}),[]);return r.a.createElement(c.a,{fluid:!0,className:"main-container"},r.a.createElement("div",{className:"homepage__block"},r.a.createElement("div",{className:"homepage__block--button"},r.a.createElement(C,null)),r.a.createElement("div",{style:{backgroundColor:["red","blue","green","orange","purple","pink","yellow","lavander","lightblue","brown"][o.id%10]},className:"homepage__title"},r.a.createElement(u.a,{as:"h2",inverted:!0,content:o.title})),r.a.createElement(c.a,{className:"grid-container"},r.a.createElement("div",{className:"topic-page"},r.a.createElement(k,{answers:o.answers}),r.a.createElement(E,{onAddAnswer:function(e){y.a.addAnswer(o.id,e).then((function(t){s(Object(p.a)(Object(p.a)({},o),{},{answers:[].concat(Object(d.a)(o.answers),[e])}))}))}})))))};var J=function(){return r.a.createElement("div",null,r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:m}),r.a.createElement(i.a,{path:"/question/:topicId",component:L}))))};a(435),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[251,1,2]]]);
//# sourceMappingURL=main.7cb8691d.chunk.js.map